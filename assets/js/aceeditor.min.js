function textAreaToAceEditor(e) { let o = document.createElement("div"); o.style.width = "100%", o.style.height = $(e).height() + "px" || "250px", e.parentNode.insertBefore(o, e), e.style.display = "none"; let n = ace.edit(o); n.getSession().setValue(e.value); try { ace_options = JSON.parse(rex.aceeditor_options) } catch (e) { ace_options = { showLineNumbers: !0, showGutter: !0, showInvisibles: !1, fontSize: 15, mode: "ace/mode/php" }, console.warn("Addon aceeditor: Error in aceeditor-Options! Using minimum default configuration!") } if (add_options = e.getAttribute("aceeditor-options"), null !== add_options) { try { new_options = JSON.parse(add_options) } catch (e) { new_options = {}, console.warn("Addon aceeditor: Error in Attribute aceeditor-options! Options ignored!") } ace_options = $.extend(ace_options, new_options) } n.setOptions(ace_options); let t = rex.aceeditor_defaulttheme, a = !1, d = null; window.matchMedia && (d = window.matchMedia("(prefers-color-scheme: dark)"), d.matches && (t = rex.aceeditor_defaultdarktheme, a = !0), document.body.classList.contains("rex-theme-light") ? t = rex.aceeditor_defaulttheme : document.body.classList.contains("rex-theme-dark") && (t = rex.aceeditor_defaultdarktheme, a = !0), d.addEventListener("change", function (e) { d.matches ? (t = rex.aceeditor_defaultdarktheme, a = !0) : t = rex.aceeditor_defaulttheme, document.body.classList.contains("rex-theme-light") ? t = rex.aceeditor_defaulttheme : document.body.classList.contains("rex-theme-dark") && (t = rex.aceeditor_defaultdarktheme, a = !0) })); var i = e.getAttribute("aceeditor-theme"); null !== i && (t = i), n.setTheme("ace/theme/" + t); e = e.getAttribute("aceeditor-mode"); return null !== e && n.getSession().setMode("ace/mode/" + e), !0 === a ? n.container.classList.add("acerexdarkmode") : n.container.classList.add("acerexmode"), n.container.style.lineHeight = 1.5, n.renderer.updateFontSize(), n.commands.addCommand({ name: "fullScreenF11", bindKey: { win: "F11", mac: "F11" }, exec: function (e) { e.container.classList.toggle("acefullscreen"), $("html").toggleClass("acefullscreenbody"), document.body.classList.toggle("acefullscreenbody"), e.resize() } }), n.commands.addCommand({ name: "fullScreenESC", bindKey: { win: "ESC", mac: "ESC" }, exec: function (e) { e.container.classList.toggle("acefullscreen"), $("html").toggleClass("acefullscreenbody"), document.body.classList.toggle("acefullscreenbody"), e.resize() } }), n.session.addEventListener("change", function (e) { let t = o.nextElementSibling; t.value = n.getSession().getValue() }), n } $(document).on("rex:ready", function () { var e, o = document.querySelectorAll(rex.aceeditor_selectors); 0 < o.length && ((e = document.createElement("script")).src = "../assets/addons/aceeditor/vendor/aceeditor/ace.js", document.head.appendChild(e), e.onload = function () { for (var e = 0; e < o.length; e++) { var t = o[e]; editor = textAreaToAceEditor(t) } }) });